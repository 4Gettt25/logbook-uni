{
  "info": {
    "name": "Logbook API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "5b7b3b7f-3a87-4a3a-bb52-7b2ccad0abcd"
  },
  "item": [
    {
      "name": "List logs",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/logs?source=auth&page=0&size=20",
          "host": ["{{baseUrl}}"],
          "path": ["api","logs"],
          "query": [
            { "key": "source", "value": "auth" },
            { "key": "page", "value": "0" },
            { "key": "size", "value": "20" }
          ]
        }
      }
    },
    {
      "name": "Get log by id",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/api/logs/{{id}}", "host": ["{{baseUrl}}"], "path": ["api","logs","{{id}}"] }
      }
    },
    {
      "name": "Create log",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"timestamp\": \"2024-01-01T00:00:00Z\",\n  \"logLevel\": \"INFO\",\n  \"source\": \"auth\",\n  \"message\": \"User logged in\",\n  \"category\": \"security\"\n}"
        },
        "url": { "raw": "{{baseUrl}}/api/logs", "host": ["{{baseUrl}}"], "path": ["api","logs"] }
      }
    },
    {
      "name": "Update log",
      "request": {
        "method": "PUT",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{\n  \"message\": \"Updated message\",\n  \"category\": \"updated-category\"\n}" },
        "url": { "raw": "{{baseUrl}}/api/logs/{{id}}", "host": ["{{baseUrl}}"], "path": ["api","logs","{{id}}"] }
      }
    },
    {
      "name": "Delete log",
      "request": {
        "method": "DELETE",
        "url": { "raw": "{{baseUrl}}/api/logs/{{id}}", "host": ["{{baseUrl}}"], "path": ["api","logs","{{id}}"] }
      }
    },
    {
      "name": "Export CSV",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/api/logs/export?format=csv&limit=100", "host": ["{{baseUrl}}"],
          "path": ["api","logs","export"], "query": [ {"key":"format","value":"csv"}, {"key":"limit","value":"100"} ] }
      }
    },
    {
      "name": "Export JSON",
      "request": {
        "method": "GET",
        "header": [ {"key":"Accept","value":"application/json"} ],
        "url": { "raw": "{{baseUrl}}/api/logs/export?format=json&limit=100", "host": ["{{baseUrl}}"],
          "path": ["api","logs","export"], "query": [ {"key":"format","value":"json"}, {"key":"limit","value":"100"} ] }
      }
    },
    {
      "name": "Servers - List",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/api/servers?page=0&size=20", "host": ["{{baseUrl}}"],
          "path": ["api","servers"], "query": [ {"key":"page","value":"0"},{"key":"size","value":"20"} ] }
      }
    },
    {
      "name": "Servers - Create",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": { "mode": "raw", "raw": "{\n  \"name\": \"server-a\",\n  \"hostname\": \"host1\",\n  \"description\": \"prod\"\n}" },
        "url": { "raw": "{{baseUrl}}/api/servers", "host": ["{{baseUrl}}"], "path": ["api","servers"] }
      }
    },
    {
      "name": "Servers - Get by id",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}", "host": ["{{baseUrl}}"], "path": ["api","servers","{{serverId}}"] }
      }
    },
    {
      "name": "Servers - Delete",
      "request": {
        "method": "DELETE",
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}", "host": ["{{baseUrl}}"], "path": ["api","servers","{{serverId}}"] }
      }
    },
    {
      "name": "Servers - Logs for server",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}/logs?page=0&size=20", "host":["{{baseUrl}}"],
          "path":["api","servers","{{serverId}}","logs"],
          "query":[{"key":"page","value":"0"},{"key":"size","value":"20"}] }
      }
    },
    {
      "name": "Servers - Distinct log levels",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}/log-levels", "host":["{{baseUrl}}"],
          "path":["api","servers","{{serverId}}","log-levels"] }
      }
    },
    {
      "name": "Servers - Upload single file",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "multipart/form-data" } ],
        "body": {
          "mode": "formdata",
          "formdata": [ { "key": "file", "type": "file", "src": ["/var/log/syslog"] } ]
        },
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}/logs/upload", "host":["{{baseUrl}}"],
          "path":["api","servers","{{serverId}}","logs","upload"] }
      }
    },
    {
      "name": "Servers - Upload multiple files",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "multipart/form-data" } ],
        "body": {
          "mode": "formdata",
          "formdata": [
            { "key": "files", "type": "file", "src": ["/var/log/syslog"] },
            { "key": "files", "type": "file", "src": ["/var/log/dpkg.log"] }
          ]
        },
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}/logs/upload", "host":["{{baseUrl}}"],
          "path":["api","servers","{{serverId}}","logs","upload"] }
      }
    },
    {
      "name": "Servers - Reevaluate levels (dry run)",
      "request": {
        "method": "POST",
        "url": { "raw": "{{baseUrl}}/api/servers/{{serverId}}/logs/reevaluate?merge=true&dryRun=true",
          "host":["{{baseUrl}}"],
          "path":["api","servers","{{serverId}}","logs","reevaluate"],
          "query":[{"key":"merge","value":"true"},{"key":"dryRun","value":"true"}] }
      }
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:8080" },
    { "key": "id", "value": "1" },
    { "key": "serverId", "value": "1" }
  ]
}
